# 变更记录：GitHub Pages 部署问题修复

## 当初需求
- 解决 GitHub Pages 上“样式丢失、子页面 404、渲染不完整”的部署问题。
- 保持 Eleventy 项目结构不变，支持 GitHub Actions 自动部署。

## 识别出的问题与原因
- **项目站点路径前缀错误**：站点部署在 `/MATHesis/`，但页面和资源使用了绝对路径 `/...`，导致请求指向根域名，样式与脚本 404。
- **部署模式不匹配**：Pages 设为从 `/docs` 分支发布，而 Eleventy 生产输出为 `dist`，导致发布内容不一致。
- **资源路径问题**：字体与部分静态资源路径不正确，发布后无法加载。

## 采用的解决手段
- 在 Eleventy 生产环境加入 `pathPrefix`，统一路径前缀。
- 模板与脚本中改用 `| url` 或基于 `baseurl` 的路径拼接，避免绝对路径错误。
- 调整 CSS 里的字体/背景资源路径为相对路径。
- 增加必要静态资源的 passthrough，确保构建产物包含所需文件。
- GitHub Pages 改为 **GitHub Actions** 部署，并确认 workflow 产物路径为 `dist`。

## 经验教训
- **项目站点必须配置路径前缀**：只要不是根域名，所有资源/路由都需要 base 路径。
- **发布方式和产物路径必须一致**：Actions 产物与 Pages Source 的设置要对齐。
- **优先使用 Eleventy 的 `| url`**：避免人工维护路径导致的环境差异错误。
- **部署前先检查网络请求**：CSS/JS 404 通常直接指向路径前缀问题。
